<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Waterfalflowlayout by XiomgMingCai</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Waterfalflowlayout</h1>
      <h2 class="project-tagline">本案例实现瀑布流布局的三大方式：JavaScript、jQurey和CSS3</h2>
      <a href="https://github.com/XiomgMingCai/WaterfalFlowLayout" class="btn">View on GitHub</a>
      <a href="https://github.com/XiomgMingCai/WaterfalFlowLayout/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/XiomgMingCai/WaterfalFlowLayout/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h2>
<a id="总结" class="anchor" href="#%E6%80%BB%E7%BB%93" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>总结</h2>

<hr>

<p>瀑布流实现的三个方法：<br>
1: JS JavaScript原生方法<br>
2: JQ JQurey方法<br>
3: CSS CSS3的多栏布局<br></p>

<h3>
<a id="javascript-实现瀑布流布局" class="anchor" href="#javascript-%E5%AE%9E%E7%8E%B0%E7%80%91%E5%B8%83%E6%B5%81%E5%B8%83%E5%B1%80" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Javascript 实现瀑布流布局，</h3>

<p>父级的应为relative
每个数据块上的 position 属性应定义为（absolute）
瀑布流的原理在于：利用绝对定位固定图片位置，图片等宽不等高。新东西：图片阴影（box-shadow）、圆角（border-radius）、用padding与margin的微妙区别。</p>

<h3>
<a id="瀑布流布局----javascript实现瀑布流布局中图片排序" class="anchor" href="#%E7%80%91%E5%B8%83%E6%B5%81%E5%B8%83%E5%B1%80----javascript%E5%AE%9E%E7%8E%B0%E7%80%91%E5%B8%83%E6%B5%81%E5%B8%83%E5%B1%80%E4%B8%AD%E5%9B%BE%E7%89%87%E6%8E%92%E5%BA%8F" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>瀑布流布局----JavaScript实现瀑布流布局中图片排序<br>
</h3>

<p>【原理】用一个数组存放每列的高度,当有新的图片加进来时,新图片总是加在列高最小的那一列,新图片加进来后,数组中相应的列的高度也相应增加.
   【要点】
   ####1. 求数组中最小值
   Math.min()只能求一组数据的最小值，通过传参数列表，而不是数组。
   借助apply()方法,</p>

<ul>
<li> 将数组转换为参数列表，</li>
<li>
<p>改变函数中this的指向(本节课用不到此功能)
Math.min.apply(null,hArr);</p>

<h4>
<a id="2-求最小值在数组中的索引封装函数getindex" class="anchor" href="#2-%E6%B1%82%E6%9C%80%E5%B0%8F%E5%80%BC%E5%9C%A8%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E7%B4%A2%E5%BC%95%E5%B0%81%E8%A3%85%E5%87%BD%E6%95%B0getindex" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2. 求最小值在数组中的索引封装函数getIndex</h4>

<h4>
<a id="3-图片定位两种方法" class="anchor" href="#3-%E5%9B%BE%E7%89%87%E5%AE%9A%E4%BD%8D%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>3. 图片定位(两种方法)</h4>

<p>position:absolute;
top:minH+’px’;
1) .left:oBoxW*index+’px’;
2) .left:oBoxs[index].offsetLeft+’px’;</p>

<h4>
<a id="4存放offsetheight的数组值harr要不断更改" class="anchor" href="#4%E5%AD%98%E6%94%BEoffsetheight%E7%9A%84%E6%95%B0%E7%BB%84%E5%80%BCharr%E8%A6%81%E4%B8%8D%E6%96%AD%E6%9B%B4%E6%94%B9" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>4.存放offsetHeight的数组值hArr要不断更改</h4>

<p>在每次加入新图片后，最小高度的box加上定位在其下的box的offsetHeight <br>即：hArr[index]+=oBoxs[i].offsetHeight;</p>

<p><img src="http://www.cftea.com/c/2009/01/R3MW6VH4GID77IZV/REUW6Z0WU6ZHU5EK.png" alt="offsetLeft"></p>

<blockquote>
<p>大块是小块的 offsetParent，红色是大块的边框，蓝色是小块的边框，蓝框外白色区域是大块的 padding 或/和 小块的 margin 或其他元素或其他原因造成的空白。offsetTop 是小块上边框上部与大块上边框下部的距离；offsetLeft 是小块左边框左部与大块左边框右部的距离。</p>
</blockquote>

<pre><code>offsetWidth属性包括padding在内的宽度，而不是元素的width值
offsetWidth = 内容宽度 + 内边距宽度×2 +边框宽度×2  【不包括外边距margin】

要点：
1.封装瀑布流的函数waterfall
2.封装通过className获取元素集的函数
  （原因：因为ie8以下不兼容classname，所以要封装一个函数来获取，如果存在多个className的情况，那么if(oElements[i].className.split(" ").indexOf(className)!==-1){……}  进行判断就OK了。如图）

3.计算一行显示的列数，父级宽度/box的offsetWidth，注意取整Math.floor；
var cols = Math.floor(document.documentElement.clientWidth / oBoxWidth);

   （获取页面可见宽度可能会出现兼容问题，可用var h = window.innerHeight || document.documentElement.clientWidth || document.body.clientWidth;   //Width,Height同理）

4.obj.style.cssText ="",以字符串的形式设置多个样式
</code></pre>
</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/XiomgMingCai/WaterfalFlowLayout">Waterfalflowlayout</a> is maintained by <a href="https://github.com/XiomgMingCai">XiomgMingCai</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
